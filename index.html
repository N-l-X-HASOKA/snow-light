<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نظام إدارة المتجر</title>
  <style>
    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }
    
    body {
      background-color: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Header Styles */
    header {
      background-color: #2c3e50;
      color: white;
      padding: 20px 0;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .logo {
      font-size: 28px;
      font-weight: bold;
    }
    
    /* Main Content */
    .main-content {
      margin-top: 30px;
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .page-title {
      font-size: 24px;
      margin-bottom: 20px;
      color: #2c3e50;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    
    /* Form Styles */
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }
    
    .form-group input, .form-group select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    
    .btn:hover {
      background-color: #2980b9;
    }
    
    .btn-block {
      display: block;
      width: 100%;
    }
    
    /* Result Styles */
    .result-container {
      margin-top: 30px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background-color: #f9f9f9;
    }
    
    .client-info {
      margin-bottom: 15px;
    }
    
    .client-info h3 {
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .client-info p {
      margin-bottom: 8px;
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      background-color: #f1f1f1;
      margin-left: 5px;
      border-radius: 4px 4px 0 0;
    }
    
    .tab.active {
      background-color: #3498db;
      color: white;
    }
    
    /* Products Section */
    .products-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 30px;
    }
    
    .product-card {
      flex: 1 1 calc(50% - 20px);
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: transform 0.3s;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
    }
    
    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }
    
    .product-info {
      padding: 15px;
    }
    
    .product-title {
      font-size: 18px;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    .product-price {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .current-price {
      font-size: 20px;
      font-weight: bold;
      color: #e74c3c;
    }
    
    .old-price {
      font-size: 16px;
      color: #999;
      text-decoration: line-through;
      margin-right: 10px;
    }
    
    .discount-badge {
      background-color: #e74c3c;
      color: white;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-right: 10px;
    }
    
    .product-description {
      color: #666;
      margin-bottom: 15px;
      display: none;
    }
    
    .quantity-controls {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .quantity-btn {
      background-color: #3498db;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
    }
    
    .quantity-input {
      width: 50px;
      text-align: center;
      margin: 0 10px;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .whatsapp-btn {
      background-color: #25D366;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
    }
    
    .whatsapp-btn i {
      margin-left: 8px;
    }
    
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      overflow: auto;
    }
    
    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 20px;
      border-radius: 8px;
      width: 80%;
      max-width: 800px;
      position: relative;
    }
    
    .close-modal {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      cursor: pointer;
      color: #333;
    }
    
    /* Snow Light Info Section */
    .snow-light-info {
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      margin-top: 30px;
    }
    
    .snow-light-info h2 {
      color: #2c3e50;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .snow-light-info p {
      margin-bottom: 15px;
      line-height: 1.8;
    }
    
    .snow-light-info ul {
      margin-bottom: 20px;
      padding-right: 20px;
    }
    
    .snow-light-info li {
      margin-bottom: 10px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      .main-content {
        padding: 20px;
      }
      
      .product-card {
        flex: 1 1 100%;
      }
      
      .modal-content {
        width: 95%;
        margin: 10% auto;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        نظام إدارة المتجر
      </div>
    </div>
  </header>
  <div class="container">
    <div class="tabs">
      <div class="tab active" onclick="showTab('products')">
        منتجاتنا
      </div>
      <div class="tab" onclick="showTab('clients')">
        إدارة العملاء
      </div>
      <div class="tab" onclick="showTab('snowlight')">
        نظام Snow Light
      </div>
    </div>
    
    <!-- قسم المنتجات -->
    <div id="products-tab" class="main-content">
      <h2 class="page-title">منتجاتنا المميزة</h2>
      <div class="products-container" id="products-container">
        <!-- سيتم ملء المنتجات ديناميكياً بواسطة JavaScript -->
      </div>
    </div>
    
    <!-- قسم إدارة العملاء -->
    <div id="clients-tab" class="main-content" style="display: none;">
      <h2 class="page-title">إدارة العملاء</h2>
      <div class="tabs">
        <div class="tab active" onclick="showClientTab('register')">
          تسجيل عميل جديد
        </div>
        <div class="tab" onclick="showClientTab('search')">
          البحث عن عميل
        </div>
      </div>
      
      <!-- تسجيل عميل جديد -->
      <div id="register-tab">
        <form id="client-form">
          <div class="form-group">
            <label for="client-id">الرقم التعريفي (6 أرقام)</label>
            <input type="text" id="client-id" placeholder="أدخل الرقم التعريفي المكون من 6 أرقام" maxlength="6" required>
          </div>
          <div class="form-group">
            <label for="client-name">الاسم الأول</label>
            <input type="text" id="client-name" placeholder="أدخل الاسم الأول" required>
          </div>
          <div class="form-group">
            <label for="client-lastname">النسبة (اسم العائلة)</label>
            <input type="text" id="client-lastname" placeholder="أدخل النسبة" required>
          </div>
          <div class="form-group">
            <label for="client-phone">رقم الهاتف</label>
            <input type="tel" id="client-phone" placeholder="أدخل رقم الهاتف" required>
          </div>
          <button type="submit" class="btn btn-block">حفظ البيانات</button>
        </form>
        <div id="register-result" class="result-container" style="display: none;">
          <h3>تم التسجيل بنجاح</h3>
          <div id="register-client-info" class="client-info"></div>
        </div>
      </div>
      
      <!-- البحث عن عميل -->
      <div id="search-tab" style="display: none;">
        <div class="form-group">
          <label for="search-id">الرقم التعريفي</label>
          <input type="text" id="search-id" placeholder="أدخل الرقم التعريفي للبحث">
        </div>
        <button onclick="searchClient()" class="btn btn-block">بحث</button>
        <div id="search-result" class="result-container" style="display: none;">
          <div id="client-info" class="client-info"></div>
        </div>
      </div>
    </div>
    
    <!-- قسم معلومات Snow Light -->
    <div id="snowlight-tab" class="main-content" style="display: none;">
      <div class="snow-light-info">
        <h2>نظام Snow Light المتكامل</h2>
        <p>
          نظام Snow Light هو حل متكامل لإدارة الإضاءة الذكية، مصمم لتوفير الراحة والكفاءة في التحكم بأنظمة الإضاءة في المنازل والمكاتب والفنادق.
        </p>
        
        <h3>المميزات الرئيسية:</h3>
        <ul>
          <li>تحكم ذكي في الإضاءة عن بعد عبر الهاتف المحمول</li>
          <li>توفير الطاقة من خلال جدولة أوتوماتيكية للإضاءة</li>
          <li>تكامل مع أنظمة المنزل الذكي الأخرى</li>
          <li>واجهة سهلة الاستخدام مع إمكانية تخصيص المشاهد الإضاءة</li>
          <li>تقارير استهلاك الطاقة لمساعدتك في توفير الكهرباء</li>
          <li>دعم لأجهزة متعددة وأنظمة تشغيل مختلفة</li>
        </ul>
        
        <h3>كيف يعمل النظام؟</h3>
        <p>
          يعتمد نظام Snow Light على تقنية Zigbee المتطورة للاتصال بين وحدات التحكم والمصابيح. يتم تثبيت وحدة تحكم رئيسية تتصل بالراوتر المنزلي، ثم تقوم المصابيح الذكية بالاتصال بهذه الوحدة لإنشاء شبكة اتصال مستقرة وآمنة.
        </p>
        
        <h3>فوائد النظام:</h3>
        <ul>
          <li>توفير يصل إلى 60% من استهلاك الطاقة للإضاءة</li>
          <li>زيادة عمر المصابيح بسبب التحكم الذكي في التشغيل والإطفاء</li>
          <li>أمان إضافي من خلال إمكانية محاكاة وجود أشخاص في المنزل أثناء السفر</li>
          <li>تكامل مع أنظمة الإنذار والأمان</li>
          <li>إمكانية التحكم الصوتي عبر مساعدين مثل Google Assistant وAmazon Alexa</li>
        </ul>
        
        <p>
          لطلب النظام أو الاستفسار، يمكنك التواصل معنا عبر الواتساب أو زيارة معرضنا.
        </p>
      </div>
    </div>
  </div>
  
  <!-- Modal لعرض تفاصيل المنتج -->
  <div id="product-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal()">&times;</span>
      <div id="modal-product-content"></div>
    </div>
  </div>
  
  <script>
    // بيانات المنتجات
    const products = [
      {
        id: 1,
        name: "مصباح ذكي LED",
        image: "A1.jpg",
        price: 149.99,
        oldPrice: 199.99,
        description: "مصباح LED ذكي متصل بالواي فاي، يمكن التحكم به عن بعد عبر الهاتف، يدعم 16 مليون لون، استهلاك منخفض للطاقة، عمر افتراضي طويل يصل إلى 25,000 ساعة."
      },
      {
        id: 2,
        name: "حساس حركة لاسلكي",
        image: "A2.jpg",
        price: 89.99,
        oldPrice: 120.00,
        description: "حساس حركة لاسلكي للإنذار والأمان، يعمل بتقنية Zigbee، مدى اكتشاف يصل إلى 8 أمتار، زاوية اكتشاف 120 درجة، مقاوم للماء والعوامل الجوية."
      },
      {
        id: 3,
        name: "وحدة تحكم مركزية",
        image: "A3.jpg",
        price: 199.99,
        oldPrice: 249.99,
        description: "الوحدة المركزية لنظام Snow Light، تدير حتى 50 جهازاً ذكياً، واجهة سهلة الاستخدام، دعم للتطبيقات الذكية، تكامل مع أنظمة المنزل الذكي الأخرى."
      },
      {
        id: 4,
        name: "مفتاح حائط ذكي",
        image: "A4.jpg",
        price: 59.99,
        oldPrice: 79.99,
        description: "مفتاح حائط ذكي لتحكم سهل في الإضاءة، تصميم عصري، يدعم اللمس والتحكم عن بعد، مؤشر ضوئي للرؤية في الظلام، سهل التركيب."
      }
    ];
    
    // عربة التسوق
    let cart = {};
    
    // عرض تبويب معين وإخفاء الآخر
    function showTab(tabName) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      document.querySelector(`.tab[onclick="showTab('${tabName}')"]`).classList.add('active');
      
      document.getElementById('products-tab').style.display = 'none';
      document.getElementById('clients-tab').style.display = 'none';
      document.getElementById('snowlight-tab').style.display = 'none';
      
      document.getElementById(`${tabName}-tab`).style.display = 'block';
    }
    
    // عرض تبويب فرعي في قسم العملاء
    function showClientTab(tabName) {
      document.querySelectorAll('#clients-tab .tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      document.querySelector(`#clients-tab .tab[onclick="showClientTab('${tabName}')"]`).classList.add('active');
      
      document.getElementById('register-tab').style.display = 'none';
      document.getElementById('search-tab').style.display = 'none';
      
      document.getElementById(`${tabName}-tab`).style.display = 'block';
    }
    
    // تحميل قاعدة بيانات العملاء من localStorage
    function loadClients() {
      const clients = localStorage.getItem('clients');
      return clients ? JSON.parse(clients) : {};
    }
    
    // حفظ قاعدة بيانات العملاء في localStorage
    function saveClients(clients) {
      localStorage.setItem('clients', JSON.stringify(clients));
    }
    
    // تسجيل عميل جديد
    document.getElementById('client-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const clientId = document.getElementById('client-id').value;
      const clientName = document.getElementById('client-name').value;
      const clientLastname = document.getElementById('client-lastname').value;
      const clientPhone = document.getElementById('client-phone').value;
      
      // التحقق من صحة الرقم التعريفي
      if (clientId.length !== 6 || !/^\d+$/.test(clientId)) {
        alert('الرقم التعريفي يجب أن يكون مكون من 6 أرقام فقط');
        return;
      }
      
      // تحميل قاعدة البيانات الحالية
      const clients = loadClients();
      
      // التحقق من عدم وجود الرقم مسبقاً
      if (clients[clientId]) {
        alert('هذا الرقم التعريفي مسجل مسبقاً');
        return;
      }
      
      // إنشاء سجل العميل
      const clientData = {
        id: clientId,
        name: clientName,
        lastname: clientLastname,
        phone: clientPhone,
        registrationDate: new Date().toLocaleDateString('ar-EG')
      };
      
      // حفظ العميل في قاعدة البيانات
      clients[clientId] = clientData;
      saveClients(clients);
      
      // عرض نتيجة التسجيل
      document.getElementById('register-result').style.display = 'block';
      document.getElementById('register-client-info').innerHTML = `
        <p><strong>الرقم التعريفي:</strong> ${clientId}</p>
        <p><strong>الاسم الكامل:</strong> ${clientName} ${clientLastname}</p>
        <p><strong>رقم الهاتف:</strong> ${clientPhone}</p>
        <p><strong>تاريخ التسجيل:</strong> ${clientData.registrationDate}</p>
      `;
      
      // تفريغ الحقول
      document.getElementById('client-form').reset();
    });
    
    // البحث عن عميل
    function searchClient() {
      const clientId = document.getElementById('search-id').value;
      
      if (clientId.length !== 6 || !/^\d+$/.test(clientId)) {
        alert('الرجاء إدخال رقم تعريفي صحيح مكون من 6 أرقام');
        return;
      }
      
      const clients = loadClients();
      const client = clients[clientId];
      
      const resultContainer = document.getElementById('search-result');
      const clientInfo = document.getElementById('client-info');
      
      if (client) {
        clientInfo.innerHTML = `
          <h3>معلومات العميل</h3>
          <p><strong>الرقم التعريفي:</strong> ${client.id}</p>
          <p><strong>الاسم الكامل:</strong> ${client.name} ${client.lastname}</p>
          <p><strong>رقم الهاتف:</strong> ${client.phone}</p>
          <p><strong>تاريخ التسجيل:</strong> ${client.registrationDate}</p>
        `;
        resultContainer.style.display = 'block';
      } else {
        clientInfo.innerHTML = '<p>لا يوجد عميل مسجل بهذا الرقم التعريفي</p>';
        resultContainer.style.display = 'block';
      }
    }
    
    // عرض المنتجات في الصفحة
    function displayProducts() {
      const container = document.getElementById('products-container');
      container.innerHTML = '';
      
      products.forEach(product => {
        const discount = Math.round(((product.oldPrice - product.price) / product.oldPrice) * 100);
        
        const productElement = document.createElement('div');
        productElement.className = 'product-card';
        productElement.innerHTML = `
          <img src="${product.image}" alt="${product.name}" class="product-image" onclick="showProductDetails(${product.id})">
          <div class="product-info">
            <h3 class="product-title">${product.name}</h3>
            <div class="product-price">
              ${product.oldPrice ? `<span class="old-price">${product.oldPrice.toFixed(2)} ر.س</span>` : ''}
              ${product.oldPrice ? `<span class="discount-badge">${discount}%</span>` : ''}
              <span class="current-price">${product.price.toFixed(2)} ر.س</span>
            </div>
            <div class="quantity-controls">
              <button class="quantity-btn" onclick="changeQuantity(${product.id}, -1)">-</button>
              <input type="number" id="quantity-${product.id}" class="quantity-input" value="1" min="1">
              <button class="quantity-btn" onclick="changeQuantity(${product.id}, 1)">+</button>
            </div>
            <button class="whatsapp-btn" onclick="orderViaWhatsApp(${product.id})">
              <i class="fab fa-whatsapp"></i> طلب عبر واتساب
            </button>
          </div>
        `;
        
        container.appendChild(productElement);
      });
    }
    
    // تغيير كمية المنتج
    function changeQuantity(productId, change) {
      const input = document.getElementById(`quantity-${productId}`);
      let newValue = parseInt(input.value) + change;
      
      if (newValue < 1) newValue = 1;
      
      input.value = newValue;
    }
    
    // طلب المنتج عبر واتساب
    function orderViaWhatsApp(productId) {
      const product = products.find(p => p.id === productId);
      const quantity = document.getElementById(`quantity-${productId}`).value;
      const totalPrice = (product.price * quantity).toFixed(2);
      
      const phoneNumber = '963952198305';
      const message = `مرحباً، أريد طلب:\n\nالمنتج: ${product.name}\nالكمية: ${quantity}\nالسعر: ${product.price.toFixed(2)} ر.س\nالإجمالي: ${totalPrice} ر.س`;
      
      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
      
      window.open(whatsappUrl, '_blank');
    }
    
    // عرض تفاصيل المنتج في المودال
    function showProductDetails(productId) {
      const product = products.find(p => p.id === productId);
      const modal = document.getElementById('product-modal');
      const modalContent = document.getElementById('modal-product-content');
      
      modalContent.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 20px;">
          <div style="display: flex; flex-wrap: wrap; gap: 20px;">
            <img src="${product.image}" alt="${product.name}" style="max-width: 300px; border-radius: 8px;">
            <div style="flex: 1; min-width: 250px;">
              <h2 style="color: #2c3e50; margin-bottom: 10px;">${product.name}</h2>
              <div style="display: flex; align-items: center; margin-bottom: 15px;">
                ${product.oldPrice ? `<span style="font-size: 18px; color: #999; text-decoration: line-through; margin-left: 10px;">${product.oldPrice.toFixed(2)} ر.س</span>` : ''}
                <span style="font-size: 24px; font-weight: bold; color: #e74c3c;">${product.price.toFixed(2)} ر.س</span>
              </div>
              <div class="quantity-controls" style="margin-bottom: 20px;">
                <button class="quantity-btn" onclick="changeModalQuantity(${product.id}, -1)">-</button>
                <input type="number" id="modal-quantity-${product.id}" class="quantity-input" value="1" min="1">
                <button class="quantity-btn" onclick="changeModalQuantity(${product.id}, 1)">+</button>
              </div>
              <button class="whatsapp-btn" onclick="orderViaWhatsApp(${product.id})" style="width: auto; padding: 10px 20px;">
                <i class="fab fa-whatsapp"></i> طلب عبر واتساب
              </button>
            </div>
          </div>
          <div>
            <h3 style="color: #2c3e50; margin-bottom: 10px;">وصف المنتج</h3>
            <p style="line-height: 1.8;">${product.description}</p>
          </div>
        </div>
      `;
      
      modal.style.display = 'block';
    }
    
    // تغيير الكمية في المودال
    function changeModalQuantity(productId, change) {
      const input = document.getElementById(`modal-quantity-${productId}`);
      let newValue = parseInt(input.value) + change;
      
      if (newValue < 1) newValue = 1;
      
      input.value = newValue;
      
      // تحديث الكمية في الصفحة الرئيسية أيضاً
      document.getElementById(`quantity-${productId}`).value = newValue;
    }
    
    // إغلاق المودال
    function closeModal() {
      document.getElementById('product-modal').style.display = 'none';
    }
    
    // إغلاق المودال عند النقر خارج المحتوى
    window.onclick = function(event) {
      const modal = document.getElementById('product-modal');
      if (event.target === modal) {
        closeModal();
      }
    }
    
    // تهيئة الصفحة عند التحميل
    window.onload = function() {
      displayProducts();
      showTab('products');
    };
  </script>
</body>
</html>